[package]
name = "zkp_mobile"
version = "0.1.0"
edition = "2021"
# ğŸ¦ Force modern dependency resolution
resolver = "2"

[lib]
crate-type = ["cdylib"]

[dependencies]
# ğŸŒ‰ Android JNI Bridge (Default features disabled for smaller size)
jni = { version = "0.21.1", default-features = false }

# ğŸ§  ZKP Engine (Plonky2) - Core Math logic
plonky2 = "0.2.2"
plonky2_field = "0.2.2"

# ğŸ“¦ Serialization (Essential for data passing)
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
anyhow = "1.0"
bincode = "1.3"
base64 = "0.21"

# ğŸ” Passport & RSA Security
hex = "0.4"
sha2 = "0.10"
rsa = { version = "0.9", features = ["sha2", "pem"] }
rand = "0.8"

# ğŸ¦ CRITICAL FIXES: Dependency Pinning for Android NDK
# In versions ko change mat karna, yeh NDK errors rokte hain
crc32fast = "=1.3.2" 
base64ct = "=1.6.0"
rayon = "=1.10.0"

# ğŸ“ Logging (Debugging for Android Logcat)
log = "0.4"
android_logger = "0.13"

[profile.release]
opt-level = 3           # Max speed for Plonky2 math
lto = "fat"             # ğŸ¦ Full Link Time Optimization (Benchmarks show 15% boost)
codegen-units = 1       # Slower build, but faster runtime performance
strip = false           # ğŸ›‘ DO NOT STRIP: Keeps symbols for debugging (remove for production Store release)
debug = true            # Essential for crash reports
overflow-checks = true  # Extra safety for ZKP math

# ğŸ¦ LOGIC SAVER FIX:
# "abort" hataya kyunki hum code me 'catch_unwind' use kar rahe hain.
# Agar 'abort' rakha toh app crash hogi, error return nahi hoga.
panic = "unwind"